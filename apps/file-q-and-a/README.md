# ファイルQ&A

ファイルQ&Aは、[Next.js](https://nextjs.org/)アプリで、OpenAIのAPIを使用してファイル内の回答を検索できるアプリです。ファイルをアップロードし、その内容に関連する質問をすることができ、アプリは埋め込みとGPTを使用して、最も関連性の高いファイルから回答を生成します。

このリポジトリには、アプリの2つのバージョンが含まれています：

- `/nextjs`：ブラウザ内で埋め込みをローカルに保存するスタンドアロンのNext.jsアプリです。このアプリを使用するには、OpenAIのAPIキーが必要です。詳細については、[README](./nextjs/README.md)をご覧ください。
- `/nextjs-with-flask-server`：Flaskサーバーをプロキシとして使用し、埋め込みを保存するためにPineconeをベクトルデータベースとして使用するNext.jsアプリです。このアプリを使用するには、OpenAIのAPIキーとPineconeのAPIキーが必要です。詳細については、[README](./nextjs-with-flask-server/README.md)をご覧ください。

アプリのどちらかのバージョンを実行するには、サブディレクトリの該当するREADME.mdファイルに記載された手順に従ってください。

## 動作原理

ファイルがアップロードされると、ファイルからテキストが抽出されます。このテキストは、より短いテキストチャンクに分割され、各テキストチャンクに対して埋め込みが作成されます。ユーザーが質問をすると、質問のために埋め込みが作成され、類似性検索が実行され、質問の埋め込みと最も類似性の高いファイルチャンク埋め込み（つまり、質問の埋め込みとのコサイン類似度が最も高いもの）が見つかります。その後、質問と最も関連性の高いファイルチャンクがプロンプトに含まれるように、完成エンドポイントへのAPIコールが行われます。生成モデルは、ファイルチャンクから質問に対する回答を生成しますが、その回答が抽出されたファイルに存在する場合に限ります。

## 制限事項

アプリは、時々ファイルに存在しない回答を生成したり、アップロードされていないファイルの存在を想像することがあります。